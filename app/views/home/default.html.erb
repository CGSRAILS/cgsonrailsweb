<div id="ac_background" class="ac_background">
	<img class="ac_bgimage" src="/images/Light.jpg" alt="Background"/>
	<div class="ac_overlay"></div>
	<div class="ac_loading"></div>
</div>
<div class="ac_Noscript" >
	<noscript>
      <p class="NoscriptFont">Esta web hace uso intensivo de Javascript. necesitás habilitarlo en tu navegador. Si no sabes como  <a href="http://www.enable-javascript.com/" target="_blank" class="btn btn-mini btn-primary popover-test">Ayuda</a></p>
    </noscript>   
</div>
<div id="ac_content" class="ac_content">
	<h1><span>on Rails</span>CGS</h1>
	<div class="ac_menu">
		<ul>
			<li>
			    <a href="/images/Lightoff.jpg">Servicio</a>
				<div class="ac_subitem">
					<span class="ac_close"></span>
					<h2>Servicio</h2>
					<ul>
						<li>
                            <strong>Registro de Dominio</strong> <small>(Nombre del sitio)</small></br>   
                            <strong>Diseño Gráfico Integral:</strong> <small> Utilizando la ultima tecnología <em>CSS3</em></small> <button class="btn btn-mini btn-primary" onclick="location.href='http://www.clarin.com'" target="_blank" type="button">Ver</button></br>
                            <strong>Programación Integral:</strong> <small> Utilizando el Framework <em>Ruby on Rails</em>, adoptado entre tantos otros por <em>Twitter.com</em></small><button class="btn btn-mini btn-primary" type="button">Ver</button></br> 
                            <strong>Puesta en Marcha:</strong> <small> Utilizando servicio de <em>Hosting Tercerizado</em> con las mejores prestaciones</small><button class="btn btn-mini btn-primary" type="button">Ver</button> </br>  
                            </br>
                            Nota</br>
					        <small> <strong>Artesanal</strong>: NO se utilizan plantillas, NO se crean sitios en serie. Cada proyecto es único, diseñado y programado desde <em>cero </em> hasta la conformidad del cliente.</small></br>
					        <small><strong>Adaptable</strong>: Utilizamos lo llamado "<em>Resposive design</em>" o diseño adaptable. El cual permite visualizar el sitio desde todos los dispositivos (<em>Movil-Tablets-Notebooks-Desktops</em>) </small>    						
   						</li>                        
                    </ul>
				</div>
			</li>
			<li>
			    <a href="/images/Lightoff.jpg">Presupuesto</a>
				<div class="ac_subitem">
					<span class="ac_close"></span>
					<h2>Presupuesto</h2>
					<ul>
					    <li>
   					    	<STRONG>Servicio</STRONG> ----------------------- 500 AR <em>único</em></br>
					        <STRONG>Actualizaciones</STRONG> --------------***** AR  <em>mensual </em></br>
					        <STRONG>Hosting</STRONG> ------------------------ 290 AR <em>anual</em></br>
                            </br>					       
					        Pack </br>
					        <STRONG>Servicio+Actualización+Hosting</STRONG> - 1000 AR <em>anual</em></br>
					    </li>
					</ul>
				</div>
			</li>
			<li>
				<a href="/images/Lightoff.jpg">Contacto</a>
				<div class="ac_subitem">
					<span class="ac_close"></span>
					<h2>Contacto</h2>
					<ul>
						<li>
							informacion@cgsonrails.com</br>
					        (223) 156-819937
					    </li>
					</ul>
				</div>
			</li>
		</ul>
	</div>
</div>
<div class="ac_footer"></div>
<!-- The JavaScript -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript" src="/assets/jquery.easing.1.3.js"></script>
<script type="text/javascript">
	$(function() {
		var $ac_background	= $('#ac_background'),
		$ac_bgimage		= $ac_background.find('.ac_bgimage'),
		$ac_loading		= $ac_background.find('.ac_loading'),
		
		$ac_content		= $('#ac_content'),
		$title			= $ac_content.find('h1'),
		$menu			= $ac_content.find('.ac_menu'),
		$mainNav		= $menu.find('ul:first'),
		$menuItems		= $mainNav.children('li'),
		totalItems		= $menuItems.length,
		$ItemImages		= new Array();
		
		/* 
		for this menu, we will preload all the images. 
		let's add all the image sources to an array,
		including the bg image
		*/
		$menuItems.each(function(i) {
			$ItemImages.push($(this).children('a:first').attr('href'));
		});
		$ItemImages.push($ac_bgimage.attr('src'));
			  
		
		var Menu 			= (function(){
			var init				= function() {
				loadPage();
				initWindowEvent();
			},
			loadPage			= function() {
				/*
					1- loads the bg image and all the item images;
					2- shows the bg image;
					3- shows / slides out the menu;
					4- shows the menu items;
					5- initializes the menu items events
				 */
				$ac_loading.show();//show loading status image
				$.when(loadImages()).done(function(){
					$.when(showBGImage()).done(function(){
						//hide the loading status image
						$ac_loading.hide();
						$.when(slideOutMenu()).done(function(){
								$.when(toggleMenuItems('up')).done(function(){
								initEventsSubMenu();
							});
						});
					});
				});
			},
			showBGImage			= function() {
				return $.Deferred(
				function(dfd) {
					//adjusts the dimensions of the image to fit the screen
					adjustImageSize($ac_bgimage);
					$ac_bgimage.fadeIn(1000, dfd.resolve);
				}
			).promise();
			},
			slideOutMenu		= function() {
				/* calculate new width for the menu */
				var new_w	= $(window).width() - $title.outerWidth(true);
				return $.Deferred(
				function(dfd) {
					//slides out the menu
					$menu.stop()
					.animate({
						width	: new_w + 'px'
					}, 700, dfd.resolve);
				}
			).promise();
			},
				/* shows / hides the menu items */
				toggleMenuItems		= function(dir) {
				return $.Deferred(
				function(dfd) {
					/*
					slides in / out the items. 
					different animation time for each one.
					*/
					$menuItems.each(function(i) {
								var $el_title	= $(this).children('a:first'),
									marginTop, opacity, easing;
								if(dir === 'up'){
									marginTop	= '0px';
									opacity		= 1;
									easing		= 'easeOutBack';
								}
								else if(dir === 'down'){
									marginTop	= '60px';
									opacity		= 0;
									easing		= 'easeInBack';
				}
						$el_title.stop()
						.animate({
											marginTop	: marginTop,
											opacity		: opacity
										 }, 200 + i * 200 , easing, function(){
							if(i === totalItems - 1)
								dfd.resolve();
						});
					});
				}
			).promise();
			},
			initEventsSubMenu	= function() {
				$menuItems.each(function(i) {
					var $item		= $(this), // the <li>
					$el_title	= $item.children('a:first'),
					el_image	= $el_title.attr('href'),
					$sub_menu	= $item.find('.ac_subitem'),
					$ac_close	= $sub_menu.find('.ac_close');
					
					/* user clicks one item : appetizers | main course | desserts | wines | specials */
					$el_title.bind('click.Menu', function(e) {
							$.when(toggleMenuItems('down')).done(function(){
							openSubMenu($item, $sub_menu, el_image);
						});
						return false;
					});
					/* closes the submenu */
					$ac_close.bind('click.Menu', function(e) {
						closeSubMenu($sub_menu);
						return false;
					});
				});
			},
			openSubMenu			= function($item, $sub_menu, el_image) {
				$sub_menu.stop()
				.animate({
					height		: '400px',
					marginTop	: '-200px'
				}, 400, function() {
								//the bg image changes
					showItemImage(el_image);
				});
			},
				/* changes the background image */
			showItemImage		= function(source) {
					//if its the current one return
				if($ac_bgimage.attr('src') === source)
					return false;
						
				var $itemImage = $('<img src="'+source+'" alt="Background" class="ac_bgimage"/>');
				$itemImage.insertBefore($ac_bgimage);
				adjustImageSize($itemImage);
				$ac_bgimage.fadeOut(1500, function() {
					$(this).remove();
					$ac_bgimage = $itemImage;
				});
				$itemImage.fadeIn(1500);
			},
			closeSubMenu		= function($sub_menu) {
				$sub_menu.stop()
				.animate({
					height		: '0px',
					marginTop	: '0px'
				}, 400, function() {
					//show items
								toggleMenuItems('up');
				});
			},
				/*
				on window resize, ajust the bg image dimentions,
				and recalculate the menus width
				*/
			initWindowEvent		= function() {
				/* on window resize set the width for the menu */
				$(window).bind('resize.Menu' , function(e) {
					adjustImageSize($ac_bgimage);
					/* calculate new width for the menu */
					var new_w	= $(window).width() - $title.outerWidth(true);
					$menu.css('width', new_w + 'px');
				});
			},
				/* makes an image "fullscreen" and centered */
			adjustImageSize		= function($img) {
				var w_w	= $(window).width(),
				w_h	= $(window).height(),
				r_w	= w_h / w_w,
				i_w	= $img.width(),
				i_h	= $img.height(),
				r_i	= i_h / i_w,
				new_w,new_h,
				new_left,new_top;
					
				if(r_w > r_i){
					new_h	= w_h;
					new_w	= w_h / r_i;
				}
				else{
					new_h	= w_w * r_i;
					new_w	= w_w;
				}
					
				$img.css({
					width	: new_w + 'px',
					height	: new_h + 'px',
					left	: (w_w - new_w) / 2 + 'px',
					top		: (w_h - new_h) / 2 + 'px'
				});
			},
				/* preloads a set of images */
			loadImages			= function() {
				return $.Deferred(
				function(dfd) {
					var total_images 	= $ItemImages.length,
					loaded			= 0;
					for(var i = 0; i < total_images; ++i){
						$('<img/>').load(function() {
							++loaded;
							if(loaded === total_images)
								dfd.resolve();
						}).attr('src' , $ItemImages[i]);
					}
				}
			).promise();
			};
				
			return {
				init : init
			};
		})();
	
		/*
	call the init method of Menu
		 */
		Menu.init();
	});
</script>

